<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telegram Post Embedder</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      padding: 40px;
    }
    h1 {
      font-weight: 700; font-size: 2.5rem; text-align: center; margin-bottom: 10px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .subtitle { text-align: center; color: #666; margin-bottom: 40px; font-size: 1.1rem; }
    label { display: block; margin-bottom: 10px; font-weight: 600; color: #333; font-size: 1.1rem; }
    textarea {
      width: 100%; min-height: 120px; padding: 15px;
      border: 2px solid #e1e5e9; border-radius: 12px;
      font-size: 16px; resize: vertical; transition: 0.3s ease;
      background: #fafbfc;
    }
    textarea:focus {
      outline: none; border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
      background: white;
    }
    .convert-btn, .clear-btn {
      border: none; border-radius: 12px; font-size: 16px; font-weight: 600;
      cursor: pointer; transition: 0.3s ease; margin-top: 15px;
    }
    .convert-btn {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white; padding: 15px 30px; width: 100%;
    }
    .convert-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(102,126,234,0.3); }
    .clear-btn {
      background: #dc3545; color: white; padding: 10px 20px;
      border-radius: 8px; font-size: 14px; font-weight: 500; margin-left: 10px;
    }
    .clear-btn:hover { background: #c82333; transform: translateY(-1px); }
    .script-output {
      background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 12px;
      padding: 15px; font-family: 'Courier New', monospace;
      font-size: 14px; white-space: pre-wrap; margin-bottom: 20px; min-height: 50px;
    }
    .embed-item {
      margin-bottom: 30px; padding: 20px; background: #f8f9fa;
      border-radius: 12px; border-left: 4px solid #667eea;
    }
    .embed-url { font-size: 14px; color: #6c757d; margin-bottom: 15px; font-weight: 500; }
    .status {
      margin-top: 15px; padding: 10px 15px; border-radius: 8px;
      font-weight: 500; text-align: center;
    }
    .status.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .status.info { background: #cce7ff; color: #004085; border: 1px solid #b3d7ff; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Telegram Post Embedder</h1>
    <p class="subtitle">Paste your Telegram links and get embedded posts automatically</p>

    <div class="input-section">
      <label for="telegramLinks">Paste Telegram Links (one per line):</label>
      <textarea id="telegramLinks" placeholder="https://t.me/thedaxbrand/1333
https://t.me/thedaxbrand/1354
https://t.me/thedaxbrand/1359"></textarea>
      <button class="convert-btn" onclick="convertLinks()">Convert & Embed</button>
      <button class="clear-btn" onclick="clearAll()">Clear All</button>
    </div>

    <div class="output-section">
      <label>Generated Scripts:</label>
      <div class="script-output" id="scriptOutput">Your generated embed scripts will appear here...</div>
      <div id="status"></div>
    </div>

    <div class="embeds-container" id="embedsContainer"></div>
  </div>

  <script>
    function extractChannelAndPost(url) {
      const match = url.match(/^https:\/\/t\.me\/([^\/]+)\/(\d+)/);
      if (match) return { channel: match[1], postId: match[2] };
      return null;
    }

    function createEmbedElement(link) {
      const extracted = extractChannelAndPost(link);
      if (!extracted) return null;

      const embedDiv = document.createElement('div');
      embedDiv.className = 'embed-item';

      const linkHeader = document.createElement('div');
      linkHeader.className = 'embed-url';
      linkHeader.textContent = `📱 ${link}`;
      embedDiv.appendChild(linkHeader);

      // The official Telegram embed script
      const scriptElement = document.createElement('script');
      scriptElement.async = true;
      scriptElement.src = "https://telegram.org/js/telegram-widget.js?22";
      scriptElement.setAttribute("data-telegram-post", `${extracted.channel}/${extracted.postId}`);
      scriptElement.setAttribute("data-width", "100%");

      embedDiv.appendChild(scriptElement);

      return { embedDiv, embedCode: scriptElement.outerHTML };
    }

    function convertLinks() {
      const textarea = document.getElementById('telegramLinks');
      const scriptOutput = document.getElementById('scriptOutput');
      const embedsContainer = document.getElementById('embedsContainer');
      const links = textarea.value.trim().split('\n').filter(link => link.trim());

      if (links.length === 0) {
        showStatus('Please enter at least one Telegram link.', 'info');
        return;
      }

      embedsContainer.innerHTML = '';
      scriptOutput.textContent = '';
      let scripts = [];
      let validLinksCount = 0;

      links.forEach(link => {
        const result = createEmbedElement(link.trim());
        if (result) {
          embedsContainer.appendChild(result.embedDiv);
          scripts.push(result.embedCode);
          validLinksCount++;
        }
      });

      if (validLinksCount > 0) {
        scriptOutput.textContent = scripts.join("\n\n");
        showStatus(`✅ Successfully converted ${validLinksCount} Telegram link${validLinksCount > 1 ? 's' : ''}.`, 'success');
      } else {
        scriptOutput.textContent = 'No valid Telegram links found.';
        showStatus('❌ No valid Telegram links found. Please check your URLs.', 'info');
      }
    }

    function clearAll() {
      document.getElementById('telegramLinks').value = '';
      document.getElementById('scriptOutput').textContent = 'Your generated embed scripts will appear here...';
      document.getElementById('embedsContainer').innerHTML = '';
      document.getElementById('status').innerHTML = '';
    }

    function showStatus(message, type) {
      const status = document.getElementById('status');
      status.textContent = message;
      status.className = `status ${type}`;
      if (type === 'info') {
        setTimeout(() => { status.innerHTML = ''; }, 5000);
      }
    }

    // Auto-convert on Ctrl+Enter
    document.getElementById('telegramLinks').addEventListener('keydown', function(e) {
      if (e.ctrlKey && e.key === 'Enter') convertLinks();
    });

    // Preload example links
    window.onload = function() {
      const sampleLinks = `https://t.me/thedaxbrand/1333
https://t.me/thedaxbrand/1354
https://t.me/thedaxbrand/1359`;
      document.getElementById('telegramLinks').value = sampleLinks;
    };
  </script>
</body>
</html>
